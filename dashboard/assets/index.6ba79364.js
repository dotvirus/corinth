import{D as e,d as t,r as l,o as a,a as s,c as o,b as n,w as u,t as i,e as r,f as d,g as c,h as p,F as m,i as f,T as v,j as g,v as x,k as y,l as b,m as w,n as h,p as k,q,s as _}from"./vendor.36672bfd.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(l){const a=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((l,o)=>{const n=new URL(e,a);if(self[t].moduleMap[n])return l(self[t].moduleMap[n]);const u=new Blob([`import * as m from '${n}';`,`${t}.moduleMap['${n}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(u),onerror(){o(new Error(`Failed to import: ${e}`)),s(i)},onload(){l(self[t].moduleMap[n]),s(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/dashboard/assets/");const C=new e.Corinth("");var Q=t({name:"App",setup(){const e=l("0.0.0"),t=l(!0);return a((async()=>{e.value=await C.version()})),{version:e,dialog:t}}});const D={class:"h-full app"},U={class:"fixed w-full shadow-md p-3 flex justify-center align-center",id:"header"},j={class:"font-bold mr-2"},$=r("Corinth"),N={class:"text-medium text-opacity-60"},R=r("Queues"),V={class:"px-3 pt-16",id:"content"},L={class:"mx-auto max-w-screen-lg"},M=n("div",{id:"dialog-target",class:"fixed"},null,-1),P={class:"p-3 bg-gray-200 text-center mt-auto text-gray-600 text-md"},H=r(" Corinth version: "),z={class:"font-semibold"},O=n("div",null,[r("Dashboard version: "),n("span",{class:"font-semibold"},"0.0.1")],-1);Q.render=function(e,t,l,a,r,c){const p=s("router-link"),m=s("router-view");return d(),o("div",D,[n("div",U,[n("div",j,[n(p,{to:"/"},{default:u((()=>[$])),_:1})]),n("div",N,[n(p,{to:"/queues"},{default:u((()=>[R])),_:1})])]),n("div",V,[n("div",L,[n(m)])]),M,n("footer",P,[n("div",null,[H,n("span",z,i(e.version),1)]),O])])};var S=t({name:"Home",components:{}});S.render=function(e,t,l,a,s,n){return d(),o("div",null,"Home")};var F=t({name:"Queues",setup(){const e=l([]),t=l(!1),s=l(""),o=l(!0),n=l(300),u=l(300),i=l(0),r=c((()=>p(s.value)));return a((async()=>{e.value=await C.listQueues()})),{queues:e,tableHeaders:[{title:"Name"},{title:"Creation date"},{title:"Size"},{title:"In flight",tooltip:"Unacknowledged messages"},{title:"Successful",tooltip:"Acknowledged ('ack') messages"},{title:"Memory size"},{title:"Persistent"}],createDialog:t,queueName:s,queuePersistent:o,slug:r,createQueue:async function(){try{await C.defineQueue(r.value).ensure({deduplication_time:n.value,requeue_time:u.value,persistent:o.value,max_length:i.value}),ne.push(`/queue/${r.value}`)}catch(e){}}}}});const A={class:"min-w-max w-full table-auto shadow"},B={class:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal font-semibold"},E={class:"text-gray-600 text-sm"},I={class:"border-b border-gray-200 hover:bg-gray-200"},J={class:"py-3 px-1 text-left whitespace-nowrap font-semibold"},T={class:"hover:text-blue-600"},W={class:"py-3 px-1 text-left whitespace-nowrap"},Y={class:"py-3 px-1 text-left whitespace-nowrap"},G={class:"py-3 px-1 text-left whitespace-nowrap"},K={class:"py-3 px-1 text-left whitespace-nowrap"},X={class:"py-3 px-1 text-left whitespace-nowrap"},Z={class:"py-3 px-1 text-left whitespace-nowrap"},ee=r("Create queue"),te=n("div",{style:{"flex-grow":"1"}},null,-1),le=n("div",{style:{"flex-grow":"1"}},null,-1),ae=r(" Will be created as "),se=n("div",{class:"inline-block ml-2 font-semibold text-sm opacity-80"}," Persistent ",-1);F.render=function(e,t,l,a,r,c){const p=s("router-link"),b=s("c-dialog");return d(),o("div",null,[n("table",A,[n("thead",null,[n("tr",B,[(d(!0),o(m,null,f(e.tableHeaders,(e=>(d(),o("td",{class:["py-3 px-1 text-left",{tooltip:!!e.tooltip}],key:e.title,title:e.tooltip},i(e.title),11,["title"])))),128))])]),n("tbody",E,[n("tr",I,[n("td",{onClick:t[1]||(t[1]=t=>e.createDialog=!0),colspan:7,class:"py-3 px-1 text-left whitespace-nowrap font-semibold cursor-pointer"}," + Create new queue ")]),(d(!0),o(m,null,f(e.queues,(e=>(d(),o("tr",{class:"border-b border-gray-200",key:e.name},[n("td",J,[n(p,{to:`/queue/${e.name}`},{default:u((()=>[n("span",T,i(e.name),1)])),_:2},1032,["to"])]),n("td",W,i(new Date(1e3*e.created_at).toLocaleString()),1),n("td",Y,i(e.size),1),n("td",G,i(e.num_unacknowledged),1),n("td",K,i(e.num_acknowledged),1),n("td",X,i(e.memory_size)+" bytes ",1),n("td",Z,i(e.persistent?"Yes":"No"),1)])))),128))])]),(d(),o(v,{to:"#dialog-target"},[n(b,{modelValue:e.createDialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.createDialog=t),"render-target":"#dialog-target"},{title:u((()=>[ee])),actions:u((()=>[te,n("button",{disabled:!e.queueName,class:"bg-blue-700 font-bold py-2 px-5 rounded-lg disabled:bg-gray-300 text-white",onClick:t[2]||(t[2]=(...t)=>e.createQueue&&e.createQueue(...t))}," Create ",8,["disabled"]),le])),default:u((()=>[n("div",null,[g(n("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.queueName=t),placeholder:"Queue name",spellcheck:"false",class:"rounded px-4 py-3 focus:outline-none bg-gray-200 w-full font-semibold text-sm"},null,512),[[x,e.queueName]]),n("div",{class:"mt-1 mb-3 text-sm opacity-60 font-medium",style:{opacity:e.queueName!==e.slug?void 0:0}},[ae,n("b",null,i(e.slug),1)],4),g(n("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.queuePersistent=t)},null,512),[[y,e.queuePersistent]]),se])])),_:1},8,["modelValue"])]))])};var oe=t({name:"QueueDetails",setup(){const e=ne.currentRoute.value.params.id,t=l(null);return a((async()=>{t.value=await C.defineQueue(ne.currentRoute.value.params.id).stat()})),{id:e,stat:t}}});oe.render=function(e,t){return d(),o("div",null,[n("div",null,i(e.id),1),n("div",null,i(JSON.stringify(e.stat)),1)])};const ne=b({history:w(),routes:[{path:"/",name:"Home",component:S},{path:"/queues",name:"Queues",component:F},{path:"/queue/:id",name:"Queue",component:oe}]});var ue=t({name:"CDialog",props:{modelValue:{type:Boolean,required:!0}},setup:(e,{emit:t})=>({toggle:function(e){t("update:modelValue",e)}})});const ie={key:0,class:"fixed w-full h-full"},re={class:"w-full h-full flex justify-center content-center relative"},de={class:"absolute w-full h-full",style:{"pointer-events":"none"}},ce={class:"w-full h-full flex justify-center items-center"},pe={class:"p-4 bg-white rounded shadow-lg flex flex-col",style:{"min-width":"400px","min-height":"250px","pointer-events":"auto"}},me={class:"text-lg font-bold mb-4"},fe=n("div",{style:{"flex-grow":"1"}},null,-1),ve={class:"flex"};ue.render=function(e,t,l,a,s,i){return d(),o(q,{name:"fade"},{default:u((()=>[e.modelValue?(d(),o("div",ie,[n("div",re,[n("div",{class:"absolute w-full h-full",style:{background:"#00000077","backdrop-filter":"blur(1px)"},onClick:t[1]||(t[1]=t=>e.toggle(!1))}),n("div",de,[n("div",ce,[n("div",pe,[n("div",me,[h(e.$slots,"title")]),n("div",null,[h(e.$slots,"default")]),fe,n("div",ve,[h(e.$slots,"actions")])])])])])])):k("",!0)])),_:3})};const ge=_(Q);ge.use(ne),ge.component("CDialog",ue),ge.mount("#app");
